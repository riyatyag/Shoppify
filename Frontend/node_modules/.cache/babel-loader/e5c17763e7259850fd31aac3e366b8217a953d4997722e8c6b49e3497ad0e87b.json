{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ShopContext=/*#__PURE__*/createContext(null);var ShopContextProvider=function ShopContextProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cartItems=_useState4[0],setCartItems=_useState4[1];var _useState5=useState(!!localStorage.getItem(\"auth-token\")),_useState6=_slicedToArray(_useState5,2),isLoggedIn=_useState6[0],setIsLoggedIn=_useState6[1];var token=localStorage.getItem(\"auth-token\");// Fetch all products\nuseEffect(function(){axios.get(\"https://shoppify-backend-gofd.onrender.com/allproducts\").then(function(res){return setProducts(res.data);}).catch(console.error);},[]);// Fetch cart data if logged in\nuseEffect(function(){if(token){setIsLoggedIn(true);axios.post(\"https://shoppify-backend-gofd.onrender.com/getcart\",{},{headers:{\"auth-token\":token}}).then(function(res){return setCartItems(res.data||{});}).catch(console.error);}},[token]);var addToCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(itemId){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(token){_context.next=2;break;}return _context.abrupt(\"return\",alert(\"Please log in to add items to cart.\"));case 2:_context.prev=2;_context.next=5;return axios.post(\"https://shoppify-backend-gofd.onrender.com/addtocart\",{itemId:itemId},{headers:{\"auth-token\":token}});case 5:res=_context.sent;setCartItems(res.data.cartData);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.error(\"Add to cart error:\",_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}));return function addToCart(_x){return _ref2.apply(this,arguments);};}();var removeFromCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(itemId){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(token){_context2.next=2;break;}return _context2.abrupt(\"return\",alert(\"Please log in to remove items from cart.\"));case 2:_context2.prev=2;_context2.next=5;return axios.post(\"https://shoppify-backend-gofd.onrender.com/removefromcart\",{itemId:itemId},{headers:{\"auth-token\":token}});case 5:res=_context2.sent;setCartItems(res.data.cartData);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.error(\"Remove from cart error:\",_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}));return function removeFromCart(_x2){return _ref3.apply(this,arguments);};}();var getTotalCartAmount=function getTotalCartAmount(){return Object.entries(cartItems).reduce(function(sum,_ref4){var _ref5=_slicedToArray(_ref4,2),id=_ref5[0],qty=_ref5[1];var product=products.find(function(p){return p.id===Number(id);});return product?sum+product.new_price*qty:sum;},0);};var getTotalCartItems=function getTotalCartItems(){return Object.values(cartItems).reduce(function(a,b){return a+b;},0);};var logout=function logout(){localStorage.removeItem(\"auth-token\");setIsLoggedIn(false);setCartItems({});};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:{products:products,cartItems:cartItems,addToCart:addToCart,removeFromCart:removeFromCart,getTotalCartAmount:getTotalCartAmount,getTotalCartItems:getTotalCartItems,isLoggedIn:isLoggedIn,logout:logout},children:children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","jsx","_jsx","ShopContext","ShopContextProvider","_ref","children","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","cartItems","setCartItems","_useState5","localStorage","getItem","_useState6","isLoggedIn","setIsLoggedIn","token","get","then","res","data","catch","console","error","post","headers","addToCart","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","itemId","wrap","_callee$","_context","prev","next","abrupt","alert","sent","cartData","t0","stop","_x","apply","arguments","removeFromCart","_ref3","_callee2","_callee2$","_context2","_x2","getTotalCartAmount","Object","entries","reduce","sum","_ref4","_ref5","id","qty","product","find","p","Number","new_price","getTotalCartItems","values","a","b","logout","removeItem","Provider","value"],"sources":["C:/Users/DELL/Desktop/E-Commerce/Frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst ShopContextProvider = ({ children }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [cartItems, setCartItems] = useState({});\r\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem(\"auth-token\"));\r\n\r\n  const token = localStorage.getItem(\"auth-token\");\r\n\r\n  // Fetch all products\r\n  useEffect(() => {\r\n    axios.get(\"https://shoppify-backend-gofd.onrender.com/allproducts\")\r\n\r\n      .then(res => setProducts(res.data))\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  // Fetch cart data if logged in\r\n  useEffect(() => {\r\n    if (token) {\r\n      setIsLoggedIn(true);\r\n      axios.post(\"https://shoppify-backend-gofd.onrender.com/getcart\"\r\n, {}, {\r\n        headers: { \"auth-token\": token },\r\n      })\r\n      .then(res => setCartItems(res.data || {}))\r\n      .catch(console.error);\r\n    }\r\n  }, [token]);\r\n\r\n  const addToCart = async (itemId) => {\r\n    if (!token) return alert(\"Please log in to add items to cart.\");\r\n\r\n    try {\r\n      const res = await axios.post(\"https://shoppify-backend-gofd.onrender.com/addtocart\"\r\n, { itemId }, {\r\n        headers: { \"auth-token\": token },\r\n      });\r\n      setCartItems(res.data.cartData);\r\n    } catch (err) {\r\n      console.error(\"Add to cart error:\", err);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (itemId) => {\r\n    if (!token) return alert(\"Please log in to remove items from cart.\");\r\n\r\n    try {\r\n      const res = await axios.post(\"https://shoppify-backend-gofd.onrender.com/removefromcart\"\r\n, { itemId }, {\r\n        headers: { \"auth-token\": token },\r\n      });\r\n      setCartItems(res.data.cartData);\r\n    } catch (err) {\r\n      console.error(\"Remove from cart error:\", err);\r\n    }\r\n  };\r\n\r\n  const getTotalCartAmount = () => {\r\n    return Object.entries(cartItems).reduce((sum, [id, qty]) => {\r\n      const product = products.find(p => p.id === Number(id));\r\n      return product ? sum + product.new_price * qty : sum;\r\n    }, 0);\r\n  };\r\n\r\n  const getTotalCartItems = () => {\r\n    return Object.values(cartItems).reduce((a, b) => a + b, 0);\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"auth-token\");\r\n    setIsLoggedIn(false);\r\n    setCartItems({});\r\n  };\r\n\r\n  return (\r\n    <ShopContext.Provider value={{\r\n      products,\r\n      cartItems,\r\n      addToCart,\r\n      removeFromCart,\r\n      getTotalCartAmount,\r\n      getTotalCartItems,\r\n      isLoggedIn,\r\n      logout\r\n    }}>\r\n      {children}\r\n    </ShopContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ShopContextProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}