{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import\"./NewsLetter.css\";import axios from\"axios\";import{ShopContext}from\"../../Context/ShopContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewsLetter=function NewsLetter(){var _useContext=useContext(ShopContext),isLoggedIn=_useContext.isLoggedIn;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var handleSubscribe=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,res,_err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(isLoggedIn){_context.next=3;break;}setMessage(\"⚠️ You must be logged in to subscribe.\");return _context.abrupt(\"return\");case 3:if(email){_context.next=6;break;}setMessage(\"❌ Email is required.\");return _context.abrupt(\"return\");case 6:_context.prev=6;token=localStorage.getItem(\"auth-token\");_context.next=10;return axios.post(\"https://shoppify-backend-gofd.onrender.com/newsletter\",{email:email},{headers:{\"auth-token\":token}});case 10:res=_context.sent;setMessage(res.data.success?\"✅ Subscribed!\":res.data.message);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](6);setMessage(((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===409?\"⚠️ Already subscribed.\":\"❌ Subscription failed.\");case 17:case\"end\":return _context.stop();}},_callee,null,[[6,14]]);}));return function handleSubscribe(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"newsletter\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Get Exclusive Offers On Your Email\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Subscribe to our newsletter and stay updated!!!!\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Your Email Id\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},disabled:!isLoggedIn}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubscribe,disabled:!isLoggedIn,children:\"Subscribe\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"newsletter-message\",children:message})]});};export default NewsLetter;","map":{"version":3,"names":["React","useState","useContext","axios","ShopContext","jsx","_jsx","jsxs","_jsxs","NewsLetter","_useContext","isLoggedIn","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","message","setMessage","handleSubscribe","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","res","_err$response","wrap","_callee$","_context","prev","next","abrupt","localStorage","getItem","post","headers","sent","data","success","t0","response","status","stop","apply","arguments","className","children","type","placeholder","value","onChange","e","target","disabled","onClick"],"sources":["C:/Users/DELL/Desktop/E-Commerce/Frontend/src/Components/NewsLetter/NewsLetter.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport \"./NewsLetter.css\";\r\nimport axios from \"axios\";\r\nimport { ShopContext } from \"../../Context/ShopContext\";\r\n\r\nconst NewsLetter = () => {\r\n  const { isLoggedIn } = useContext(ShopContext);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubscribe = async () => {\r\n    if (!isLoggedIn) {\r\n      setMessage(\"⚠️ You must be logged in to subscribe.\");\r\n      return;\r\n    }\r\n    if (!email) {\r\n      setMessage(\"❌ Email is required.\");\r\n      return;\r\n    }\r\n    try {\r\n      const token = localStorage.getItem(\"auth-token\");\r\n      const res = await axios.post(\r\n  \"https://shoppify-backend-gofd.onrender.com/newsletter\",\r\n  { email },\r\n  { headers: { \"auth-token\": token } }\r\n);\r\n      setMessage(res.data.success ? \"✅ Subscribed!\" : res.data.message);\r\n    } catch (err) {\r\n      setMessage(\r\n        err.response?.status === 409\r\n          ? \"⚠️ Already subscribed.\"\r\n          : \"❌ Subscription failed.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"newsletter\">\r\n      <h1>Get Exclusive Offers On Your Email</h1>\r\n      <p>Subscribe to our newsletter and stay updated!!!!</p>\r\n      <div>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Your Email Id\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          disabled={!isLoggedIn}\r\n        />\r\n        <button onClick={handleSubscribe} disabled={!isLoggedIn}>\r\n          Subscribe\r\n        </button>\r\n      </div>\r\n      {message && <p className=\"newsletter-message\">{message}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewsLetter;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}