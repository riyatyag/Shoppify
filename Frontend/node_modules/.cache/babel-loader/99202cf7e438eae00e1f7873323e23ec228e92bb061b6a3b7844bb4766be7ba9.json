{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\E-Commerce\\\\Frontend\\\\src\\\\Context\\\\ShopContext.jsx\",\n  _s = $RefreshSig$();\n//   const contextValue = {\n//     all_product,\n//     cartItems,\n//     addToCart,\n//     removeFromCart,\n//     getTotalCartAmount,\n//     getTotalCartItems,\n//   };\n\n//   return (\n//     <ShopContext.Provider value={contextValue}>\n//       {props.children}\n//     </ShopContext.Provider>\n//   );\n// };\n\n// export default ShopContextProvider;\n\nimport React, { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst ShopContextProvider = ({\n  children\n}) => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [cartItems, setCartItems] = useState({});\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem(\"auth-token\"));\n  const token = localStorage.getItem(\"auth-token\");\n\n  // Fetch all products\n  useEffect(() => {\n    axios.get(\"http://localhost:4001/allproducts\").then(res => setProducts(res.data)).catch(console.error);\n  }, []);\n\n  // Fetch cart data if logged in\n  useEffect(() => {\n    if (token) {\n      setIsLoggedIn(true);\n      axios.post(\"http://localhost:4001/getcart\", {}, {\n        headers: {\n          \"auth-token\": token\n        }\n      }).then(res => setCartItems(res.data || {})).catch(console.error);\n    }\n  }, [token]);\n  const addToCart = async itemId => {\n    if (!token) return alert(\"Please log in to add items to cart.\");\n    try {\n      const res = await axios.post(\"http://localhost:4001/addtocart\", {\n        itemId\n      }, {\n        headers: {\n          \"auth-token\": token\n        }\n      });\n      setCartItems(res.data.cartData);\n    } catch (err) {\n      console.error(\"Add to cart error:\", err);\n    }\n  };\n  const removeFromCart = async itemId => {\n    if (!token) return alert(\"Please log in to remove items from cart.\");\n    try {\n      const res = await axios.post(\"http://localhost:4001/removefromcart\", {\n        itemId\n      }, {\n        headers: {\n          \"auth-token\": token\n        }\n      });\n      setCartItems(res.data.cartData);\n    } catch (err) {\n      console.error(\"Remove from cart error:\", err);\n    }\n  };\n  const getTotalCartAmount = () => {\n    return Object.entries(cartItems).reduce((sum, [id, qty]) => {\n      const product = products.find(p => p.id === Number(id));\n      return product ? sum + product.new_price * qty : sum;\n    }, 0);\n  };\n  const getTotalCartItems = () => {\n    return Object.values(cartItems).reduce((a, b) => a + b, 0);\n  };\n  const logout = () => {\n    localStorage.removeItem(\"auth-token\");\n    setIsLoggedIn(false);\n    setCartItems({});\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: {\n      products,\n      cartItems,\n      addToCart,\n      removeFromCart,\n      getTotalCartAmount,\n      getTotalCartItems,\n      isLoggedIn,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(ShopContextProvider, \"6w32gigA+D11aOG59X1TrVUmV3I=\");\n_c = ShopContextProvider;\nexport default ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","jsxDEV","_jsxDEV","ShopContext","ShopContextProvider","children","_s","products","setProducts","cartItems","setCartItems","isLoggedIn","setIsLoggedIn","localStorage","getItem","token","get","then","res","data","catch","console","error","post","headers","addToCart","itemId","alert","cartData","err","removeFromCart","getTotalCartAmount","Object","entries","reduce","sum","id","qty","product","find","p","Number","new_price","getTotalCartItems","values","a","b","logout","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/E-Commerce/Frontend/src/Context/ShopContext.jsx"],"sourcesContent":["\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//   const contextValue = {\r\n//     all_product,\r\n//     cartItems,\r\n//     addToCart,\r\n//     removeFromCart,\r\n//     getTotalCartAmount,\r\n//     getTotalCartItems,\r\n//   };\r\n\r\n//   return (\r\n//     <ShopContext.Provider value={contextValue}>\r\n//       {props.children}\r\n//     </ShopContext.Provider>\r\n//   );\r\n// };\r\n\r\n// export default ShopContextProvider;\r\n\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const ShopContext = createContext(null);\r\n\r\nconst ShopContextProvider = ({ children }) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [cartItems, setCartItems] = useState({});\r\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem(\"auth-token\"));\r\n\r\n  const token = localStorage.getItem(\"auth-token\");\r\n\r\n  // Fetch all products\r\n  useEffect(() => {\r\n    axios.get(\"http://localhost:4001/allproducts\")\r\n      .then(res => setProducts(res.data))\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  // Fetch cart data if logged in\r\n  useEffect(() => {\r\n    if (token) {\r\n      setIsLoggedIn(true);\r\n      axios.post(\"http://localhost:4001/getcart\", {}, {\r\n        headers: { \"auth-token\": token },\r\n      })\r\n      .then(res => setCartItems(res.data || {}))\r\n      .catch(console.error);\r\n    }\r\n  }, [token]);\r\n\r\n  const addToCart = async (itemId) => {\r\n    if (!token) return alert(\"Please log in to add items to cart.\");\r\n\r\n    try {\r\n      const res = await axios.post(\"http://localhost:4001/addtocart\", { itemId }, {\r\n        headers: { \"auth-token\": token },\r\n      });\r\n      setCartItems(res.data.cartData);\r\n    } catch (err) {\r\n      console.error(\"Add to cart error:\", err);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (itemId) => {\r\n    if (!token) return alert(\"Please log in to remove items from cart.\");\r\n\r\n    try {\r\n      const res = await axios.post(\"http://localhost:4001/removefromcart\", { itemId }, {\r\n        headers: { \"auth-token\": token },\r\n      });\r\n      setCartItems(res.data.cartData);\r\n    } catch (err) {\r\n      console.error(\"Remove from cart error:\", err);\r\n    }\r\n  };\r\n\r\n  const getTotalCartAmount = () => {\r\n    return Object.entries(cartItems).reduce((sum, [id, qty]) => {\r\n      const product = products.find(p => p.id === Number(id));\r\n      return product ? sum + product.new_price * qty : sum;\r\n    }, 0);\r\n  };\r\n\r\n  const getTotalCartItems = () => {\r\n    return Object.values(cartItems).reduce((a, b) => a + b, 0);\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"auth-token\");\r\n    setIsLoggedIn(false);\r\n    setCartItems({});\r\n  };\r\n\r\n  return (\r\n    <ShopContext.Provider value={{\r\n      products,\r\n      cartItems,\r\n      addToCart,\r\n      removeFromCart,\r\n      getTotalCartAmount,\r\n      getTotalCartItems,\r\n      isLoggedIn,\r\n      logout\r\n    }}>\r\n      {children}\r\n    </ShopContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ShopContextProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}