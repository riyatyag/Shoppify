{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/DELL/Desktop/E-Commerce/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./CSS/LoginSignup.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginSignUp=function LoginSignUp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),agree=_useState10[0],setAgree=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,body,res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setError('');setSuccess('');if(!(!email||!password||!isLogin&&!name)){_context.next=5;break;}setError('Please fill in all fields');return _context.abrupt(\"return\");case 5:if(!(!isLogin&&!agree)){_context.next=8;break;}setError('You must agree to the terms of use & privacy policy');return _context.abrupt(\"return\");case 8:setLoading(true);_context.prev=9;url=isLogin?'https://shoppify-backend-gofd.onrender.com/login':'https://shoppify-backend-gofd.onrender.com/signup';body=isLogin?{email:email,password:password}:{username:name,email:email,password:password};_context.next=14;return fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});case 14:res=_context.sent;_context.next=17;return res.json();case 17:data=_context.sent;console.log('Response:',data);if(data.success){if(isLogin){setSuccess('Login successful!');localStorage.setItem('auth-token',data.token);// ✅ Fixed key\n//  Bonus: Redirect to home page after login\nsetTimeout(function(){window.location.href='/';},1000);}else{setSuccess('Signup successful! You can now log in.');setIsLogin(true);setName('');setEmail('');setPassword('');setAgree(false);}}else{setError(data.message||'Failed');}_context.next=26;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](9);console.error('Error:',_context.t0);setError('Network error. Please try again.');case 26:setLoading(false);case 27:case\"end\":return _context.stop();}},_callee,null,[[9,22]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"logInSignUp\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"logInSignUp-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isLogin?'Log In':'Sign Up'}),/*#__PURE__*/_jsxs(\"div\",{className:\"logInSignUp-fields\",children:[!isLogin&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email Address\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),!isLogin&&/*#__PURE__*/_jsxs(\"div\",{className:\"logInSignUp-agree\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:agree,onChange:function onChange(){return setAgree(!agree);}}),/*#__PURE__*/_jsx(\"p\",{children:\"By continuing, I agree to the terms of use & privacy policy.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading,children:loading?isLogin?'Logging In...':'Signing Up...':isLogin?'Log In':'Continue'}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginTop:'10px'},children:error}),success&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green',marginTop:'10px'},children:success}),/*#__PURE__*/_jsxs(\"p\",{className:\"logInSignUp-login\",children:[isLogin?\"Don't have an account? \":'Already have an account? ',/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setError('');setSuccess('');setIsLogin(!isLogin);},style:{color:'blue',cursor:'pointer',textDecoration:'underline'},children:isLogin?'Sign Up Here':'Log In Here'})]})]})});};export default LoginSignUp;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","LoginSignUp","_useState","_useState2","_slicedToArray","isLogin","setIsLogin","_useState3","_useState4","name","setName","_useState5","_useState6","email","setEmail","_useState7","_useState8","password","setPassword","_useState9","_useState10","agree","setAgree","_useState11","_useState12","loading","setLoading","_useState13","_useState14","error","setError","_useState15","_useState16","success","setSuccess","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","body","res","data","wrap","_callee$","_context","prev","next","abrupt","username","fetch","method","headers","JSON","stringify","sent","json","console","log","localStorage","setItem","token","setTimeout","window","location","href","message","t0","stop","apply","arguments","className","children","type","placeholder","value","onChange","e","target","checked","onClick","disabled","style","color","marginTop","cursor","textDecoration"],"sources":["C:/Users/DELL/Desktop/E-Commerce/Frontend/src/Pages/LoginSignup.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './CSS/LoginSignup.css';\r\n\r\nconst LoginSignUp = () => {\r\n  const [isLogin, setIsLogin] = useState(false);\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [agree, setAgree] = useState(false);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const handleSubmit = async () => {\r\n    setError('');\r\n    setSuccess('');\r\n\r\n    if (!email || !password || (!isLogin && !name)) {\r\n      setError('Please fill in all fields');\r\n      return;\r\n    }\r\n\r\n    if (!isLogin && !agree) {\r\n      setError('You must agree to the terms of use & privacy policy');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const url = isLogin\r\n  ? 'https://shoppify-backend-gofd.onrender.com/login'\r\n  : 'https://shoppify-backend-gofd.onrender.com/signup';\r\n\r\n\r\n      const body = isLogin\r\n        ? { email, password }\r\n        : { username: name, email, password };\r\n\r\n      const res = await fetch(url, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      const data = await res.json();\r\n      console.log('Response:', data);\r\n\r\n      if (data.success) {\r\n        if (isLogin) {\r\n          setSuccess('Login successful!');\r\n          localStorage.setItem('auth-token', data.token); // ✅ Fixed key\r\n\r\n          //  Bonus: Redirect to home page after login\r\n          setTimeout(() => {\r\n            window.location.href = '/';\r\n          }, 1000);\r\n        } else {\r\n          setSuccess('Signup successful! You can now log in.');\r\n          setIsLogin(true);\r\n          setName('');\r\n          setEmail('');\r\n          setPassword('');\r\n          setAgree(false);\r\n        }\r\n      } else {\r\n        setError(data.message || 'Failed');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error:', err);\r\n      setError('Network error. Please try again.');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className='logInSignUp'>\r\n      <div className=\"logInSignUp-container\">\r\n        <h1>{isLogin ? 'Log In' : 'Sign Up'}</h1>\r\n        <div className=\"logInSignUp-fields\">\r\n          {!isLogin && (\r\n            <input\r\n              type=\"text\"\r\n              placeholder='Your Name'\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          )}\r\n          <input\r\n            type=\"email\"\r\n            placeholder='Email Address'\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder='Password'\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {!isLogin && (\r\n          <div className=\"logInSignUp-agree\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={agree}\r\n              onChange={() => setAgree(!agree)}\r\n            />\r\n            <p>By continuing, I agree to the terms of use & privacy policy.</p>\r\n          </div>\r\n        )}\r\n\r\n        <button onClick={handleSubmit} disabled={loading}>\r\n          {loading\r\n            ? (isLogin ? 'Logging In...' : 'Signing Up...')\r\n            : (isLogin ? 'Log In' : 'Continue')}\r\n        </button>\r\n\r\n        {error && <p style={{ color: 'red', marginTop: '10px' }}>{error}</p>}\r\n        {success && <p style={{ color: 'green', marginTop: '10px' }}>{success}</p>}\r\n\r\n        <p className='logInSignUp-login'>\r\n          {isLogin\r\n            ? \"Don't have an account? \"\r\n            : 'Already have an account? '}\r\n          <span\r\n            onClick={() => {\r\n              setError('');\r\n              setSuccess('');\r\n              setIsLogin(!isLogin);\r\n            }}\r\n            style={{ color: 'blue', cursor: 'pointer', textDecoration: 'underline' }}\r\n          >\r\n            {isLogin ? 'Sign Up Here' : 'Log In Here'}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginSignUp;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}